window.onload=function(){var a=document.getElementById("datamints_feuser_"+contentid+"_form");addEvent(a,"submit",formCheck);a.getElementsByTagName("input");for(var b=0;b<inputids.length;b++){a=document.getElementById(inputids[b]);a.type=="checkbox"?addEvent(a,"click",inputItemCheck):addEvent(a,"change",inputItemCheck)}};
function formCheck(a){var b,d=false;for(fieldId in inputids)if(typeof inputids[fieldId]!="function"){b=inputItemCheck(null,document.getElementById(inputids[fieldId]));if(b==true&&d==false){d=true;window.event?(event.returnValue=false):a.preventDefault()}}}
function inputItemCheck(a,b){var d=false,e=null;if(a!=null)b=a.target?a.target:a.srcElement;a=b.value;if(b.type=="select-one"||b.type=="select-multiple"){a=[];var c=0,f=0;for(c in b.options)if(b.options[c]!=null&&b.options[c].selected){a[f]=b.options[c].value;f++}}if(b.type=="checkbox")a=b.checked;c=b.name.split("[")[1].split("]")[0];if(c.split("_")[1]=="rep")c=c.split("_")[0];removeInfo(c);if(config[c]!=null){var g=config[c].validation;if(config[c].required&&(!a||typeof a=="object"&&!a.length)){f=
b;if(g&&g.type=="password")if(b.id.split("_").reverse()[0]!="rep")f=e=document.getElementById(b.id+"_rep");d=true;removeInfo(c);showInfo(f,c,"required")}else if(g)switch(g.type){case "password":if(b.id.split("_").reverse()[0]!="rep")f=e=document.getElementById(b.id+"_rep");else{e=document.getElementById(b.id.slice(0,b.id.length-4));f=b}b=e.value;if(a!=""||b!=""){e=new Array("6");if(a==b)if(g.size){e=g.size.replace(" ","").split(",");if(e[1]){if(a.length<e[0]||a.length>e[1]){d=true;removeInfo(c);showInfo(f,
c,"size")}}else if(a.length<e[0]){d=true;removeInfo(c);showInfo(f,c,"size")}}else{if(a.length<e[0]){d=true;removeInfo(c);showInfo(f,c,"size")}}else{d=true;removeInfo(c);showInfo(f,c,"equal")}}break;case "email":f=b;if(!a.match(/^[a-zA-Z0-9\._%+-]+@[a-zA-Z0-9\.-]+\.[a-zA-Z]{2,6}$/)){d=true;removeInfo(c);showInfo(f,c,"valid")}break;case "username":f=b;if(!a.match(/^[^ ]*$/)){d=true;removeInfo(c);showInfo(f,c,"valid")}break;case "custom":f=b;if(g.regexp)if(typeof a=="object"){b=0;for(b in a)if(!a[b].match(g.regexp)){d=
true;removeInfo(c);showInfo(f,c,"valid")}}else if(!a.match(g.regexp)){d=true;removeInfo(c);showInfo(f,c,"valid")}if(g.size){e=g.size.replace(" ","").split(",");if(e[1]){if(a.length<e[0]||a.length>e[1]){d=true;removeInfo(c);showInfo(f,c,"size")}}else if(a.length<e[0]){d=true;removeInfo(c);showInfo(f,c,"size")}}break}}return d}function showInfo(a,b,d){var e=document.createElement("div");e.className="form_error "+b+"_error";e.innerHTML=config[b][d];a.parentNode.insertBefore(e,a.nextSibling)}
function removeInfo(a){var b=a;if(config[a].validation&&config[a].validation.type=="password")b=a+"_rep";b=document.getElementById("datamints_feuser_"+contentid+"_"+b+"_wrapper");b!=undefined&&b.lastChild.className=="form_error "+a+"_error"&&b.removeChild(b.lastChild)}function addEvent(a,b,d){if(a.addEventListener)a.addEventListener(b,d,false);else if(a.attachEvent){a["e"+b+d]=d;a[b+d]=function(){a["e"+b+d](window.event)};a.attachEvent("on"+b,a[b+d])}};
