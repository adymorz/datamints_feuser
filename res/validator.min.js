var formId=0,config=[],inputids=[],contentids=[];window.onload=function(){for(formId in contentids)if(typeof contentids[formId]!="function"){var c=document.getElementById("datamints_feuser_"+formId+"_form");addEvent(c,"submit",formCheck);c.getElementsByTagName("input");for(var a=0;a<inputids[formId].length;a++){c=document.getElementById(inputids[formId][a]);c.type=="checkbox"?addEvent(c,"click",inputItemCheck):addEvent(c,"change",inputItemCheck)}}};
function formCheck(c){var a,d=false;formId=getEventTarget(c).id.split("_")[2];for(fieldId in inputids[formId])if(typeof inputids[formId][fieldId]!="function"){a=inputItemCheck(null,document.getElementById(inputids[formId][fieldId]),formId);if(a==true&&d==false){d=true;window.event?event.returnValue=false:c.preventDefault()}}}
function inputItemCheck(c,a){var d=false,e=null;if(c!=null)a=getEventTarget(c);var f=a.value;if(a.type=="select-one"||a.type=="select-multiple"){f=[];var b=0,g=0;for(b in a.options)if(a.options[b]!=null&&a.options[b].selected){f[g]=a.options[b].value;g++}}if(a.type=="checkbox")f=a.checked;b=a.name.split("[")[2].split("]")[0];if(b.split("_").reverse()[0]=="rep")b=b.slice(0,b.length-4);formId=a.id.split("_")[2];removeInfo(b);if(config[formId][b]!=null){var h=config[formId][b].validation;if(config[formId][b].required&&
(!f||typeof f=="object"&&!f.length)){g=a;if(h&&h.type=="password")if(a.id.split("_").reverse()[0]!="rep")g=e=document.getElementById(a.id+"_rep");d=true;removeInfo(b);showInfo(g,b,"required")}else if(h)switch(h.type){case "password":if(a.id.split("_").reverse()[0]!="rep")g=e=document.getElementById(a.id+"_rep");else{e=document.getElementById(a.id.slice(0,a.id.length-4));g=a}var i=e.value;if(f!=""||i!=""){e=Array("6");if(f==i)if(h.size){e=h.size.replace(" ","").split(",");if(e[1]){if(f.length<e[0]||
f.length>e[1]){d=true;removeInfo(b);showInfo(g,b,"size")}}else if(f.length<e[0]){d=true;removeInfo(b);showInfo(g,b,"size")}}else{if(f.length<e[0]){d=true;removeInfo(b);showInfo(g,b,"size")}}else{d=true;removeInfo(b);showInfo(g,b,"equal")}}break;case "email":g=a;if(!f.match(/^[a-zA-Z0-9\._%+-]+@[a-zA-Z0-9\.-]+\.[a-zA-Z]{2,6}$/)){d=true;removeInfo(b);showInfo(g,b,"valid")}break;case "username":g=a;if(!f.match(/^[^ ]*$/)){d=true;removeInfo(b);showInfo(g,b,"valid")}break;case "custom":g=a;if(h.regexp)if(typeof f==
"object"){e=0;for(e in f)if(!f[e].match(h.regexp)){d=true;removeInfo(b);showInfo(g,b,"valid")}}else if(!f.match(h.regexp)){d=true;removeInfo(b);showInfo(g,b,"valid")}if(h.size){e=h.size.replace(" ","").split(",");if(e[1]){if(f.length<e[0]||f.length>e[1]){d=true;removeInfo(b);showInfo(g,b,"size")}}else if(f.length<e[0]){d=true;removeInfo(b);showInfo(g,b,"size")}}break}}return d}function getEventTarget(c){return c.target?c.target:c.srcElement}
function showInfo(c,a,d){var e=document.createElement("div");e.className="form_error "+a+"_error";e.innerHTML=config[formId][a][d];c.parentNode.insertBefore(e,c.nextSibling)}function removeInfo(c){var a=c;if(config[formId][c].validation&&config[formId][c].validation.type=="password")a=c+"_rep";a=document.getElementById("datamints_feuser_"+formId+"_"+a+"_wrapper");a!=undefined&&a.lastChild.className=="form_error "+c+"_error"&&a.removeChild(a.lastChild)}
function addEvent(c,a,d){if(c.addEventListener)c.addEventListener(a,d,false);else if(c.attachEvent){c["e"+a+d]=d;c[a+d]=function(){c["e"+a+d](window.event)};c.attachEvent("on"+a,c[a+d])}};
